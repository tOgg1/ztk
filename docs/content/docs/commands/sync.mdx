---
title: sync
description: Rebase on main and clean up merged branches
---

# ztk sync

Fetch the latest changes, rebase your stack on main, and clean up merged branches.

## Usage

```bash
ztk sync
```

## Description

The `sync` command keeps your stack up to date with the main branch:

1. **Fetches** the latest changes from the remote
2. **Rebases** your current branch onto the updated main branch
3. **Cleans up** local and remote branches for merged PRs

## Output Example

```
  Fetching origin...
  ✓ Fetched

  Rebasing onto origin/main...
  ✓ Rebased (3 commits)

  Cleaning merged branches...
    └─ Deleted: ztk/feature/abc123 (PR #42 merged)
    └─ Deleted: ztk/feature/def456 (PR #43 merged)
  ✓ Cleaned 2 branches

  Stack is up to date.
```

## When to Use

Run `ztk sync` when:

- Starting work for the day to get latest main
- After PRs in your stack have been merged
- Before creating new commits on top of your stack
- When you see "behind main" warnings in status

## Handling Conflicts

If rebasing causes conflicts, ztk will stop and show:

```
  Rebasing onto origin/main...
  ✗ Conflict detected

  Conflicting files:
    - src/auth.go
    - src/db.go

  To resolve:
    1. Fix conflicts in the listed files
    2. git add <resolved files>
    3. git rebase --continue
    4. ztk update
```

## See Also

- [update](/docs/commands/update) — Sync PRs after rebasing
- [status](/docs/commands/status) — Check if you're behind main
